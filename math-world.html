<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ§® Math Magic World | Fun Math for Kids!</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Baloo+2:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --sun: #FFD93D;
    --coral: #FF6B6B;
    --mint: #6BCB77;
    --sky: #4D96FF;
    --purple: #C77DFF;
    --orange: #FF9A3C;
    --pink: #FF6FD8;
    --teal: #00C9B1;
    --cream: #FFFBF0;
    --dark: #1A1A2E;
    --card-radius: 24px;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Nunito', sans-serif;
    background: var(--cream);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* â”€â”€â”€ ANIMATED BACKGROUND â”€â”€â”€ */
  body::before {
    content: '';
    position: fixed; inset: 0;
    background:
      radial-gradient(circle at 10% 20%, #FFD93D22 0%, transparent 40%),
      radial-gradient(circle at 90% 80%, #6BCB7722 0%, transparent 40%),
      radial-gradient(circle at 50% 50%, #4D96FF11 0%, transparent 60%);
    pointer-events: none; z-index: 0;
  }

  .page-wrapper { position: relative; z-index: 1; max-width: 1300px; margin: 0 auto; padding: 20px; }

  /* â”€â”€â”€ NAV â”€â”€â”€ */
  nav {
    background: var(--dark);
    border-radius: 20px;
    padding: 14px 28px;
    margin-bottom: 28px;
    box-shadow: 0 8px 32px rgba(26,26,46,0.25);
    display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px;
  }
  .nav-logo { color: white; font-family: 'Baloo 2', sans-serif; font-size: 1.4em; font-weight: 800; text-decoration: none; display: flex; align-items: center; gap: 8px; }
  .nav-links { display: flex; gap: 6px; flex-wrap: wrap; }
  .nav-links a {
    color: rgba(255,255,255,0.75); text-decoration: none; font-weight: 700;
    padding: 8px 16px; border-radius: 12px; transition: all 0.25s; font-size: 0.95em;
  }
  .nav-links a:hover { background: rgba(255,255,255,0.12); color: white; }
  .nav-links a.active { background: var(--sun); color: var(--dark); }

  /* â”€â”€â”€ HERO â”€â”€â”€ */
  .hero {
    text-align: center;
    padding: 48px 20px 36px;
    position: relative;
  }
  .hero-title {
    font-family: 'Baloo 2', sans-serif;
    font-size: clamp(2.4em, 6vw, 4.2em);
    font-weight: 800;
    background: linear-gradient(135deg, var(--coral) 0%, var(--orange) 35%, var(--sun) 70%, var(--mint) 100%);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
    line-height: 1.15; margin-bottom: 14px;
  }
  .hero-sub {
    font-size: 1.25em; color: #555; font-weight: 700; margin-bottom: 28px;
  }
  .floating-nums {
    position: absolute; inset: 0; pointer-events: none; overflow: hidden;
  }
  .float-item {
    position: absolute;
    font-size: clamp(1.4em, 3vw, 2.5em);
    font-family: 'Baloo 2', sans-serif; font-weight: 800;
    opacity: 0.12; animation: floatNum 8s infinite ease-in-out;
    color: var(--dark);
  }
  @keyframes floatNum {
    0%,100% { transform: translateY(0) rotate(-5deg); }
    50%      { transform: translateY(-22px) rotate(5deg); }
  }

  /* â”€â”€â”€ TOPIC PILLS â”€â”€â”€ */
  .topic-nav {
    display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;
    margin-bottom: 40px;
  }
  .topic-pill {
    padding: 10px 22px; border-radius: 40px; border: 3px solid transparent;
    font-weight: 800; font-size: 1em; cursor: pointer; transition: all 0.25s;
    background: white; box-shadow: 0 4px 14px rgba(0,0,0,0.08);
  }
  .topic-pill:hover { transform: translateY(-3px); box-shadow: 0 8px 22px rgba(0,0,0,0.14); }
  .topic-pill.active { color: white !important; }

  /* â”€â”€â”€ SECTIONS â”€â”€â”€ */
  .math-section { display: none; animation: sectionIn 0.4s ease; }
  .math-section.visible { display: block; }
  @keyframes sectionIn {
    from { opacity: 0; transform: translateY(24px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .section-title {
    font-family: 'Baloo 2', sans-serif; font-size: 2.2em; font-weight: 800;
    margin-bottom: 8px;
  }
  .section-sub { color: #666; font-size: 1.1em; font-weight: 600; margin-bottom: 32px; }

  /* â”€â”€â”€ CARD GRID â”€â”€â”€ */
  .card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 22px; margin-bottom: 40px;
  }

  .math-card {
    background: white;
    border-radius: var(--card-radius);
    padding: 28px;
    box-shadow: 0 6px 28px rgba(0,0,0,0.08);
    border: 3px solid transparent;
    transition: all 0.3s cubic-bezier(.175,.885,.32,1.275);
    position: relative; overflow: hidden;
  }
  .math-card::before {
    content: '';
    position: absolute; top: 0; left: 0; right: 0; height: 6px;
  }
  .math-card:hover { transform: translateY(-8px); box-shadow: 0 18px 48px rgba(0,0,0,0.14); }

  /* card accent colors */
  .card-coral::before { background: var(--coral); }
  .card-mint::before  { background: var(--mint); }
  .card-sky::before   { background: var(--sky); }
  .card-sun::before   { background: var(--sun); }
  .card-purple::before{ background: var(--purple); }
  .card-orange::before{ background: var(--orange); }
  .card-pink::before  { background: var(--pink); }
  .card-teal::before  { background: var(--teal); }

  .card-icon { font-size: 3em; margin-bottom: 12px; display: block; }
  .card-title { font-family: 'Baloo 2', sans-serif; font-size: 1.5em; font-weight: 800; color: var(--dark); margin-bottom: 8px; }
  .card-desc  { color: #666; line-height: 1.6; font-size: 0.98em; margin-bottom: 18px; }

  .play-btn {
    display: inline-block; padding: 11px 26px; border: none;
    border-radius: 40px; font-weight: 800; font-size: 1em;
    cursor: pointer; transition: all 0.25s; color: white;
  }
  .play-btn:hover { transform: scale(1.07); filter: brightness(1.1); }
  .btn-coral  { background: var(--coral); }
  .btn-mint   { background: var(--mint); }
  .btn-sky    { background: var(--sky); }
  .btn-sun    { background: var(--orange); }
  .btn-purple { background: var(--purple); }
  .btn-pink   { background: var(--pink); }
  .btn-teal   { background: var(--teal); }

  /* â”€â”€â”€ PLAYGROUND WRAPPER â”€â”€â”€ */
  .playground {
    display: none; background: white; border-radius: var(--card-radius);
    padding: 32px; margin-bottom: 32px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    animation: sectionIn 0.4s ease;
    border: 3px solid #f0f0f0;
  }
  .playground.open { display: block; }
  .playground-header {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 26px; flex-wrap: wrap; gap: 12px;
  }
  .playground-header h2 { font-family: 'Baloo 2', sans-serif; font-size: 1.8em; font-weight: 800; }
  .close-btn {
    background: #FFE5E5; color: var(--coral); border: none; padding: 10px 20px;
    border-radius: 40px; font-weight: 800; cursor: pointer; transition: all 0.2s;
  }
  .close-btn:hover { background: var(--coral); color: white; }

  /* â”€â”€â”€ ABACUS â”€â”€â”€ */
  .abacus-frame {
    background: linear-gradient(135deg, #3D1C02 0%, #5C2A07 100%);
    border-radius: 20px; padding: 24px;
    box-shadow: 0 12px 40px rgba(61,28,2,0.4), inset 0 2px 8px rgba(255,255,255,0.1);
    position: relative; overflow: hidden;
    max-width: 700px; margin: 0 auto 24px;
  }
  .abacus-frame::before {
    content: '';
    position: absolute; inset: 0;
    background: repeating-linear-gradient(90deg, transparent, transparent 8px, rgba(0,0,0,0.06) 8px, rgba(0,0,0,0.06) 9px);
    pointer-events: none;
  }
  .abacus-label {
    text-align: center; color: #E8C97A; font-family: 'Baloo 2', sans-serif;
    font-weight: 800; font-size: 1.1em; margin-bottom: 16px;
    letter-spacing: 3px; text-transform: uppercase;
  }
  .abacus-rows { display: flex; flex-direction: column; gap: 14px; }
  .abacus-row { display: flex; align-items: center; gap: 10px; }
  .row-label {
    color: #E8C97A; font-weight: 800; font-size: 0.9em;
    width: 60px; text-align: right; flex-shrink: 0;
    font-family: 'Baloo 2', sans-serif;
  }
  .rod-container {
    flex: 1; position: relative; height: 44px;
    display: flex; align-items: center;
  }
  .rod {
    position: absolute; inset: 50% 0 auto;
    height: 5px; background: linear-gradient(180deg, #C8A96E, #8B6914);
    border-radius: 3px; transform: translateY(-50%);
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  }
  .beads-container {
    display: flex; gap: 6px; align-items: center;
    position: relative; z-index: 1; padding: 0 4px;
  }
  .bead {
    width: 36px; height: 36px; border-radius: 50%;
    cursor: pointer; transition: all 0.25s cubic-bezier(.175,.885,.32,1.275);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3), inset 0 2px 4px rgba(255,255,255,0.3);
    position: relative; flex-shrink: 0;
  }
  .bead.off {
    background: radial-gradient(circle at 35% 35%, #8B6914, #4A3408);
    opacity: 0.45; transform: scale(0.88);
  }
  .bead.on {
    opacity: 1; transform: scale(1.08);
    animation: beadPop 0.2s ease;
  }
  .bead.on::after {
    content: ''; position: absolute; inset: 20% 20% auto auto;
    width: 30%; height: 30%; background: rgba(255,255,255,0.55);
    border-radius: 50%;
  }
  @keyframes beadPop {
    0%   { transform: scale(1.25); }
    60%  { transform: scale(0.95); }
    100% { transform: scale(1.08); }
  }

  .abacus-display {
    display: flex; justify-content: center; gap: 20px; margin-top: 20px;
  }
  .abacus-number {
    background: rgba(255,255,255,0.1); color: var(--sun);
    padding: 10px 24px; border-radius: 14px;
    font-family: 'Baloo 2', sans-serif; font-weight: 800; font-size: 1.4em;
    text-align: center;
  }
  .abacus-controls {
    display: flex; justify-content: center; gap: 12px; flex-wrap: wrap; margin-top: 16px;
  }
  .abacus-btn {
    background: var(--sun); color: var(--dark); border: none;
    padding: 10px 22px; border-radius: 30px; font-weight: 800;
    cursor: pointer; transition: all 0.25s;
  }
  .abacus-btn:hover { background: var(--orange); color: white; transform: scale(1.05); }

  /* â”€â”€â”€ NUMBER LINE â”€â”€â”€ */
  .number-line-wrapper {
    background: linear-gradient(135deg, #E8F5FF 0%, #F0E8FF 100%);
    border-radius: 20px; padding: 28px;
    margin-bottom: 24px; overflow-x: auto;
  }
  .number-line-track {
    position: relative; height: 100px; min-width: 600px;
    display: flex; align-items: center; margin: 20px 10px;
  }
  .nl-rail {
    position: absolute; top: 50%; left: 0; right: 0;
    height: 6px; background: linear-gradient(90deg, var(--sky), var(--purple));
    border-radius: 3px; transform: translateY(-50%);
    box-shadow: 0 3px 10px rgba(77,150,255,0.3);
  }
  .nl-marker {
    position: absolute; top: 50%; transform: translate(-50%, -50%);
    display: flex; flex-direction: column; align-items: center; gap: 4px; cursor: pointer;
  }
  .nl-tick {
    width: 3px; height: 28px; background: var(--dark); border-radius: 2px;
    transition: all 0.2s;
  }
  .nl-num {
    font-weight: 800; font-size: 1em; color: var(--dark);
    position: absolute; top: calc(50% + 22px);
  }
  .nl-dot {
    width: 18px; height: 18px; border-radius: 50%; background: var(--sky);
    position: absolute; top: calc(50% - 9px); border: 3px solid white;
    box-shadow: 0 3px 10px rgba(0,0,0,0.2);
    transition: left 0.5s cubic-bezier(.175,.885,.32,1.275);
  }
  .nl-frog {
    position: absolute; font-size: 2em;
    top: calc(50% - 58px);
    transition: left 0.5s cubic-bezier(.175,.885,.32,1.275);
    animation: frogIdle 1.5s infinite ease-in-out;
  }
  @keyframes frogIdle {
    0%,100% { transform: translateX(-50%) scaleY(1); }
    50%      { transform: translateX(-50%) scaleY(1.08); }
  }
  .nl-controls {
    display: flex; gap: 10px; align-items: center; flex-wrap: wrap;
    justify-content: center; margin-top: 16px;
  }
  .nl-btn {
    background: var(--sky); color: white; border: none; padding: 10px 22px;
    border-radius: 30px; font-weight: 800; cursor: pointer; transition: all 0.25s;
  }
  .nl-btn:hover { background: var(--purple); transform: scale(1.05); }
  .nl-value {
    font-family: 'Baloo 2', sans-serif; font-weight: 800;
    font-size: 1.5em; color: var(--dark); min-width: 60px; text-align: center;
  }

  /* â”€â”€â”€ FINGER COUNTING â”€â”€â”€ */
  .hands-area {
    display: flex; justify-content: center; gap: 30px; flex-wrap: wrap;
    margin-bottom: 20px;
  }
  .hand-card {
    background: linear-gradient(135deg, #FFF5E6 0%, #FFE5D0 100%);
    border-radius: 20px; padding: 24px; text-align: center;
    border: 3px solid var(--orange); min-width: 200px;
  }
  .hand-title { font-weight: 800; color: var(--dark); margin-bottom: 12px; font-size: 1em; }
  .fingers {
    display: flex; gap: 6px; justify-content: center; margin-bottom: 12px;
  }
  .finger {
    display: flex; flex-direction: column; align-items: center; cursor: pointer;
    transition: transform 0.2s;
  }
  .finger:hover { transform: scale(1.1); }
  .finger-body {
    font-size: 2.8em; line-height: 1; transition: all 0.25s;
    filter: grayscale(0.3);
  }
  .finger.raised .finger-body { filter: grayscale(0) drop-shadow(0 3px 6px rgba(255,107,107,0.4)); }
  .finger-num { font-size: 0.7em; font-weight: 800; color: #aaa; margin-top: 2px; }
  .hand-sum {
    font-family: 'Baloo 2', sans-serif; font-size: 2.2em; font-weight: 800;
    color: var(--coral);
  }

  /* â”€â”€â”€ VISUAL COUNTING â”€â”€â”€ */
  .object-counter {
    background: linear-gradient(135deg, #F0FFF4 0%, #E8F8FF 100%);
    border-radius: 20px; padding: 28px; margin-bottom: 20px;
    border: 3px solid var(--mint);
  }
  .object-display {
    display: flex; flex-wrap: wrap; gap: 8px; justify-content: center;
    min-height: 80px; align-items: center; margin: 16px 0;
    padding: 16px; background: white; border-radius: 14px;
  }
  .count-obj { font-size: 2.2em; animation: popIn 0.3s cubic-bezier(.175,.885,.32,1.275); cursor: default; }
  @keyframes popIn {
    0%   { transform: scale(0) rotate(-20deg); opacity: 0; }
    80%  { transform: scale(1.15) rotate(5deg); }
    100% { transform: scale(1) rotate(0); opacity: 1; }
  }
  .counter-controls {
    display: flex; gap: 12px; justify-content: center; align-items: center; flex-wrap: wrap;
  }
  .count-btn {
    width: 52px; height: 52px; border-radius: 50%; border: none;
    font-size: 1.6em; font-weight: 800; cursor: pointer;
    transition: all 0.25s; box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }
  .count-btn:hover { transform: scale(1.12); }
  .btn-plus  { background: var(--mint); color: white; }
  .btn-minus { background: var(--coral); color: white; }
  .count-display {
    font-family: 'Baloo 2', sans-serif; font-size: 3em; font-weight: 800;
    color: var(--dark); min-width: 70px; text-align: center;
  }
  .object-selector { display: flex; gap: 8px; justify-content: center; flex-wrap: wrap; margin-bottom: 16px; }
  .obj-option {
    font-size: 1.8em; cursor: pointer; padding: 8px; border-radius: 12px;
    border: 3px solid transparent; transition: all 0.2s;
  }
  .obj-option:hover, .obj-option.chosen { border-color: var(--mint); background: #F0FFF4; }

  /* â”€â”€â”€ ADDITION / SUBTRACTION VISUALIZER â”€â”€â”€ */
  .op-stage {
    background: linear-gradient(135deg, #FFF8E1 0%, #FFE0B2 100%);
    border-radius: 20px; padding: 28px;
    margin-bottom: 20px; border: 3px solid var(--sun);
  }
  .op-row {
    display: flex; align-items: center; gap: 16px; flex-wrap: wrap;
    justify-content: center; margin-bottom: 20px;
  }
  .op-input {
    width: 80px; height: 60px; border-radius: 16px; border: 3px solid var(--sun);
    font-family: 'Baloo 2', sans-serif; font-size: 2em; font-weight: 800;
    text-align: center; color: var(--dark); background: white;
    transition: border-color 0.2s; outline: none;
  }
  .op-input:focus { border-color: var(--orange); }
  .op-symbol {
    font-family: 'Baloo 2', sans-serif; font-size: 2.2em;
    font-weight: 900; color: var(--orange);
  }
  .op-equals {
    font-family: 'Baloo 2', sans-serif; font-size: 2em; font-weight: 900; color: var(--dark);
  }
  .op-result {
    font-family: 'Baloo 2', sans-serif; font-size: 2.5em; font-weight: 900;
    color: var(--coral); min-width: 80px; text-align: center;
    background: white; border-radius: 16px; padding: 8px 16px;
    border: 3px solid var(--coral);
  }
  .op-visual {
    display: flex; gap: 14px; flex-wrap: wrap; justify-content: center;
    align-items: center; padding: 16px; background: white; border-radius: 14px;
    min-height: 70px;
  }
  .op-group { display: flex; flex-wrap: wrap; gap: 5px; max-width: 200px; justify-content: center; }
  .op-block {
    width: 28px; height: 28px; border-radius: 8px;
    animation: popIn 0.25s ease;
  }
  .op-divider { font-size: 2em; font-weight: 900; }
  .calc-btn {
    background: var(--orange); color: white; border: none;
    padding: 12px 30px; border-radius: 30px; font-weight: 800;
    font-size: 1.1em; cursor: pointer; transition: all 0.25s;
    margin-top: 14px;
  }
  .calc-btn:hover { background: var(--coral); transform: scale(1.05); }

  /* â”€â”€â”€ TIMES TABLES â”€â”€â”€ */
  .times-table-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
    gap: 10px; margin-bottom: 20px;
  }
  .tt-cell {
    aspect-ratio: 1; display: flex; align-items: center; justify-content: center;
    border-radius: 14px; font-family: 'Baloo 2', sans-serif;
    font-weight: 800; font-size: 1em; cursor: pointer;
    transition: all 0.25s; background: white;
    box-shadow: 0 3px 10px rgba(0,0,0,0.08);
    border: 2px solid #f0f0f0;
    flex-direction: column; gap: 2px;
  }
  .tt-cell:hover {
    transform: scale(1.12); box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    border-color: var(--purple);
  }
  .tt-cell.highlight { color: white; border-color: transparent; }
  .tt-cell span { font-size: 0.65em; color: inherit; opacity: 0.7; font-family: 'Nunito', sans-serif; }
  .tt-controls { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; justify-content: center; }
  .tt-num-btn {
    width: 48px; height: 48px; border-radius: 50%; border: 3px solid var(--purple);
    background: white; font-weight: 800; font-size: 1.1em; cursor: pointer;
    transition: all 0.25s; color: var(--purple);
  }
  .tt-num-btn:hover, .tt-num-btn.active { background: var(--purple); color: white; transform: scale(1.1); }

  /* â”€â”€â”€ SHAPES & GEOMETRY â”€â”€â”€ */
  .shapes-gallery {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 16px; margin-bottom: 24px;
  }
  .shape-card {
    background: white; border-radius: 20px; padding: 20px;
    text-align: center; cursor: pointer; transition: all 0.3s;
    box-shadow: 0 4px 16px rgba(0,0,0,0.08); border: 3px solid transparent;
  }
  .shape-card:hover { transform: translateY(-6px); border-color: var(--pink); }
  .shape-svg { width: 80px; height: 80px; margin: 0 auto 10px; display: block; }
  .shape-name { font-weight: 800; color: var(--dark); font-size: 1em; margin-bottom: 4px; }
  .shape-fact { color: #888; font-size: 0.85em; line-height: 1.4; }

  /* â”€â”€â”€ FRACTION PIZZA â”€â”€â”€ */
  .pizza-area {
    display: flex; justify-content: center; flex-wrap: wrap; gap: 30px;
    margin-bottom: 24px;
  }
  .pizza-container {
    display: flex; flex-direction: column; align-items: center; gap: 12px;
  }
  .pizza-canvas { width: 200px; height: 200px; border-radius: 50%; overflow: hidden; }
  .fraction-label {
    font-family: 'Baloo 2', sans-serif; font-size: 1.8em; font-weight: 800;
    color: var(--coral);
  }
  .slice-desc { font-weight: 700; color: #666; font-size: 0.9em; text-align: center; }
  .fraction-btns { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
  .frac-btn {
    background: white; border: 3px solid var(--coral); color: var(--coral);
    padding: 8px 18px; border-radius: 30px; font-weight: 800; cursor: pointer;
    transition: all 0.25s;
  }
  .frac-btn:hover, .frac-btn.active { background: var(--coral); color: white; }

  /* â”€â”€â”€ QUIZ â”€â”€â”€ */
  .quiz-card {
    background: linear-gradient(135deg, #F3F0FF 0%, #E8F5FF 100%);
    border-radius: 20px; padding: 32px; text-align: center;
    border: 3px solid var(--purple); margin-bottom: 20px;
  }
  .quiz-question {
    font-family: 'Baloo 2', sans-serif; font-size: 2em; font-weight: 800;
    color: var(--dark); margin-bottom: 24px;
  }
  .quiz-options {
    display: grid; grid-template-columns: repeat(2, 1fr);
    gap: 12px; max-width: 480px; margin: 0 auto 20px;
  }
  .quiz-opt {
    padding: 16px; border-radius: 16px; border: 3px solid #ddd;
    background: white; font-family: 'Baloo 2', sans-serif;
    font-size: 1.4em; font-weight: 800; cursor: pointer;
    transition: all 0.25s; color: var(--dark);
  }
  .quiz-opt:hover { border-color: var(--purple); background: #F3F0FF; transform: scale(1.04); }
  .quiz-opt.correct { background: var(--mint); border-color: var(--mint); color: white; }
  .quiz-opt.wrong   { background: var(--coral); border-color: var(--coral); color: white; animation: shake 0.4s ease; }
  @keyframes shake {
    0%,100%{ transform: translateX(0); }
    25%    { transform: translateX(-8px); }
    75%    { transform: translateX(8px); }
  }
  .quiz-feedback {
    font-size: 1.3em; font-weight: 800; margin-bottom: 16px; min-height: 32px;
    transition: all 0.3s;
  }
  .quiz-score {
    background: var(--dark); color: var(--sun); padding: 10px 24px;
    border-radius: 30px; display: inline-block;
    font-family: 'Baloo 2', sans-serif; font-weight: 800; font-size: 1.1em;
  }
  .next-btn {
    background: var(--purple); color: white; border: none;
    padding: 12px 30px; border-radius: 30px; font-weight: 800;
    font-size: 1.1em; cursor: pointer; transition: all 0.25s;
    display: none; margin: 12px auto;
  }
  .next-btn:hover { background: var(--pink); transform: scale(1.05); }
  .next-btn.show { display: block; }

  /* â”€â”€â”€ PROGRESS / STARS â”€â”€â”€ */
  .star-row { display: flex; gap: 6px; justify-content: center; margin-top: 10px; }
  .star { font-size: 1.6em; filter: grayscale(1); transition: all 0.3s; }
  .star.lit { filter: grayscale(0); animation: starBurst 0.4s ease; }
  @keyframes starBurst {
    0%  { transform: scale(0) rotate(-30deg); }
    70% { transform: scale(1.3) rotate(10deg); }
    100%{ transform: scale(1) rotate(0); }
  }

  /* â”€â”€â”€ MEASUREMENT â”€â”€â”€ */
  .ruler-wrap {
    background: #FFF8E1; border-radius: 20px; padding: 28px;
    border: 3px solid var(--sun); margin-bottom: 20px;
  }
  .ruler {
    display: flex; align-items: flex-end; gap: 0;
    background: linear-gradient(180deg, #E8C97A 0%, #C8A95A 100%);
    border-radius: 10px; padding: 12px 0 4px; overflow: hidden;
    margin-bottom: 20px; position: relative;
    box-shadow: 0 4px 16px rgba(200,169,90,0.4);
  }
  .ruler-unit {
    flex: 1; display: flex; flex-direction: column; align-items: center;
    border-right: 2px solid rgba(255,255,255,0.3); min-width: 36px;
    cursor: pointer; transition: all 0.2s; padding: 4px 0;
  }
  .ruler-unit:last-child { border-right: none; }
  .ruler-unit:hover { background: rgba(255,255,255,0.2); }
  .ruler-tick { width: 2px; border-radius: 1px; margin-bottom: 4px; background: rgba(255,255,255,0.8); }
  .big-tick   { height: 24px; }
  .small-tick { height: 14px; }
  .ruler-num { font-weight: 800; font-size: 0.85em; color: rgba(255,255,255,0.9); }
  .measure-object {
    display: flex; align-items: center; gap: 10px; flex-wrap: wrap;
    justify-content: center; margin-bottom: 20px;
  }
  .measure-item { font-size: 3em; }
  .measure-arrow {
    height: 6px; background: var(--coral); border-radius: 3px;
    position: relative; transition: width 0.5s cubic-bezier(.175,.885,.32,1.275);
    display: flex; align-items: center;
  }
  .measure-arrow::before, .measure-arrow::after {
    content: ''; position: absolute; top: 50%; transform: translateY(-50%);
    width: 0; height: 0;
  }
  .measure-arrow::before { left: -8px; border: 8px solid transparent; border-right-color: var(--coral); border-left: none; }
  .measure-arrow::after  { right: -8px; border: 8px solid transparent; border-left-color: var(--coral); border-right: none; }

  /* â”€â”€â”€ RESPONSIVE â”€â”€â”€ */
  @media (max-width: 700px) {
    nav { flex-direction: column; }
    .quiz-options { grid-template-columns: 1fr; }
    .times-table-grid { grid-template-columns: repeat(5,1fr); }
  }
</style>
</head>
<body>
<div class="page-wrapper">

  <!-- â”€â”€ NAVIGATION â”€â”€ -->
  <nav>
    <a href="index.html" class="nav-logo">ğŸŒŸ Learning Adventure</a>
    <div class="nav-links">
      <a href="index.html">ğŸ  CogAT Prep</a>
      <a href="coding-basics.html">ğŸ’» Coding Basics</a>
      <a href="ai-adventure.html">ğŸ¤– AI Adventure</a>
      <a href="creative-coding.html">ğŸ¨ Creative Coding</a>
      <a href="math-world.html" class="active">ğŸ§® Math</a>
      <a href="privacy.html">ğŸ”’ Privacy</a>
    </div>
  </nav>

  <!-- â”€â”€ HERO â”€â”€ -->
  <div class="hero">
    <div class="floating-nums">
      <span class="float-item" style="top:8%;left:4%;animation-delay:0s">1+1=2</span>
      <span class="float-item" style="top:15%;right:6%;animation-delay:1.2s">Ï€</span>
      <span class="float-item" style="top:60%;left:2%;animation-delay:2.4s">Ã—</span>
      <span class="float-item" style="top:70%;right:3%;animation-delay:0.7s">Â½</span>
      <span class="float-item" style="top:40%;left:92%;animation-delay:1.8s">âˆ</span>
      <span class="float-item" style="top:85%;left:50%;animation-delay:3s">5!</span>
    </div>
    <h1 class="hero-title">ğŸ§® Math Magic World!</h1>
    <p class="hero-sub">Learn maths with beads, frogs, pizzas, fingers & more!</p>
  </div>

  <!-- â”€â”€ TOPIC NAVIGATION â”€â”€ -->
  <div class="topic-nav" id="topic-nav">
    <button class="topic-pill active" style="color:var(--coral);border-color:var(--coral)" onclick="showSection('abacus',this)">ğŸ§® Abacus</button>
    <button class="topic-pill" style="color:var(--sky);border-color:var(--sky)" onclick="showSection('numberline',this)">ğŸ¸ Number Line</button>
    <button class="topic-pill" style="color:var(--orange);border-color:var(--orange)" onclick="showSection('fingers',this)">ğŸ– Finger Counting</button>
    <button class="topic-pill" style="color:var(--mint);border-color:var(--mint)" onclick="showSection('visual',this)">ğŸ‘€ Visual Counting</button>
    <button class="topic-pill" style="color:var(--coral);border-color:var(--coral)" onclick="showSection('operations',this)">â• Add &amp; Subtract</button>
    <button class="topic-pill" style="color:var(--purple);border-color:var(--purple)" onclick="showSection('times',this)">âœ– Times Tables</button>
    <button class="topic-pill" style="color:var(--pink);border-color:var(--pink)" onclick="showSection('shapes',this)">ğŸ”· Shapes</button>
    <button class="topic-pill" style="color:var(--teal);border-color:var(--teal)" onclick="showSection('fractions',this)">ğŸ• Fractions</button>
    <button class="topic-pill" style="color:var(--sun);border-color:var(--orange)" onclick="showSection('measurement',this)">ğŸ“ Measurement</button>
    <button class="topic-pill" style="color:var(--purple);border-color:var(--purple)" onclick="showSection('quiz',this)">ğŸ¯ Math Quiz</button>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION 1 â€” ABACUS
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="math-section visible" id="sec-abacus">
    <h2 class="section-title" style="color:var(--coral)">ğŸ§® The Abacus</h2>
    <p class="section-sub">An abacus counts with beads on rods. Click beads to move them ON or OFF!</p>

    <div class="abacus-frame">
      <div class="abacus-label">ğŸ§® Abacus â€” Click the Beads!</div>
      <div class="abacus-rows" id="abacus-rows"></div>
      <div class="abacus-display">
        <div class="abacus-number" id="abacus-total">Total: 0</div>
        <div class="abacus-number" id="abacus-equation">= 0</div>
      </div>
    </div>

    <div class="abacus-controls">
      <button class="abacus-btn" onclick="abacusReset()">ğŸ”„ Reset All</button>
      <button class="abacus-btn" onclick="abacusSetNumber(5)">Show 5</button>
      <button class="abacus-btn" onclick="abacusSetNumber(12)">Show 12</button>
      <button class="abacus-btn" onclick="abacusSetNumber(27)">Show 27</button>
      <button class="abacus-btn" onclick="abacusSetNumber(100)">Show 100</button>
    </div>

    <div class="card-grid" style="margin-top:32px">
      <div class="math-card card-coral">
        <span class="card-icon">ğŸ›ï¸</span>
        <h3 class="card-title">Ancient Tool</h3>
        <p class="card-desc">The abacus is over 2,000 years old! People in China, Rome, and Greece used it to count before calculators were invented.</p>
      </div>
      <div class="math-card card-mint">
        <span class="card-icon">ğŸ§ </span>
        <h3 class="card-title">Brain Power</h3>
        <p class="card-desc">Using an abacus helps both sides of your brain work together, making you faster at mental math!</p>
      </div>
      <div class="math-card card-sky">
        <span class="card-icon">ğŸ“Š</span>
        <h3 class="card-title">Place Value</h3>
        <p class="card-desc">Each rod stands for a different place: ones (1s), tens (10s), hundreds (100s). Moving beads changes the number!</p>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION 2 â€” NUMBER LINE
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="math-section" id="sec-numberline">
    <h2 class="section-title" style="color:var(--sky)">ğŸ¸ Number Line Jump!</h2>
    <p class="section-sub">Help the frog jump along the number line to add and subtract!</p>

    <div class="number-line-wrapper">
      <div style="text-align:center;font-weight:800;color:var(--sky);margin-bottom:8px;font-size:1.1em">Jump from 0 to any number!</div>
      <div class="number-line-track" id="nl-track">
        <div class="nl-rail"></div>
      </div>
      <div class="nl-controls">
        <button class="nl-btn" onclick="frogJump(-1)">â¬… âˆ’1</button>
        <button class="nl-btn" onclick="frogJump(-2)">â¬… âˆ’2</button>
        <div class="nl-value" id="frog-pos">0</div>
        <button class="nl-btn" onclick="frogJump(1)">+1 â¡</button>
        <button class="nl-btn" onclick="frogJump(2)">+2 â¡</button>
        <button class="nl-btn" onclick="frogJump(5)">+5 â¡</button>
        <button class="nl-btn" style="background:var(--coral)" onclick="frogReset()">ğŸ”„ Reset</button>
      </div>
    </div>

    <div style="background: linear-gradient(135deg,#E8F5FF,#F0E8FF); border-radius:20px; padding:24px; margin-bottom:24px;">
      <h3 style="font-family:'Baloo 2',sans-serif;font-weight:800;color:var(--sky);margin-bottom:12px">ğŸ¯ Jump Challenge!</h3>
      <p style="font-weight:700;color:#444;margin-bottom:8px" id="nl-challenge">Start at 0. Jump +3, then +2. Where do you land?</p>
      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
        <button class="nl-btn" onclick="checkNLAnswer(5)">5</button>
        <button class="nl-btn" onclick="checkNLAnswer(4)">4</button>
        <button class="nl-btn" onclick="checkNLAnswer(6)">6</button>
        <button class="nl-btn" onclick="checkNLAnswer(3)">3</button>
      </div>
      <p id="nl-feedback" style="margin-top:12px;font-weight:800;font-size:1.1em;min-height:26px;"></p>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION 3 â€” FINGER COUNTING
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="math-section" id="sec-fingers">
    <h2 class="section-title" style="color:var(--orange)">ğŸ– Finger Counting</h2>
    <p class="section-sub">Your fingers are your first calculator! Tap fingers to raise or lower them.</p>

    <div class="hands-area">
      <!-- Left Hand -->
      <div class="hand-card">
        <div class="hand-title">Left Hand ğŸ¤š</div>
        <div class="fingers" id="left-fingers">
          <div class="finger" onclick="toggleFinger(this,'left',0)">
            <div class="finger-body">ğŸ‘</div><div class="finger-num">5</div>
          </div>
          <div class="finger" onclick="toggleFinger(this,'left',1)">
            <div class="finger-body">â˜ï¸</div><div class="finger-num">4</div>
          </div>
          <div class="finger" onclick="toggleFinger(this,'left',2)">
            <div class="finger-body">ğŸ–•</div><div class="finger-num">3</div>
          </div>
          <div class="finger" onclick="toggleFinger(this,'left',3)">
            <div class="finger-body">ğŸ’</div><div class="finger-num">2</div>
          </div>
          <div class="finger" onclick="toggleFinger(this,'left',4)">
            <div class="finger-body">ğŸ¤™</div><div class="finger-num">1</div>
          </div>
        </div>
        <div class="hand-sum" id="left-sum">0</div>
      </div>

      <!-- Operator -->
      <div style="display:flex;flex-direction:column;align-items:center;gap:16px;padding-top:40px">
        <div style="font-size:2.5em;font-weight:900;color:var(--orange)">+</div>
        <div style="font-family:'Baloo 2',sans-serif;font-size:3em;font-weight:900;color:var(--dark);background:white;padding:10px 20px;border-radius:16px;box-shadow:0 4px 16px rgba(0,0,0,0.1);" id="total-fingers">0</div>
        <div style="font-size:1em;font-weight:700;color:#888">Total</div>
      </div>

      <!-- Right Hand -->
      <div class="hand-card">
        <div class="hand-title">Right Hand ğŸ–</div>
        <div class="fingers" id="right-fingers">
          <div class="finger" onclick="toggleFinger(this,'right',0)">
            <div class="finger-body">ğŸ¤™</div><div class="finger-num">1</div>
          </div>
          <div class="finger" onclick="toggleFinger(this,'right',1)">
            <div class="finger-body">ğŸ’</div><div class="finger-num">2</div>
          </div>
          <div class="finger" onclick="toggleFinger(this,'right',2)">
            <div class="finger-body">ğŸ–•</div><div class="finger-num">3</div>
          </div>
          <div class="finger" onclick="toggleFinger(this,'right',3)">
            <div class="finger-body">â˜ï¸</div><div class="finger-num">4</div>
          </div>
          <div class="finger" onclick="toggleFinger(this,'right',4)">
            <div class="finger-body">ğŸ‘</div><div class="finger-num">5</div>
          </div>
        </div>
        <div class="hand-sum" id="right-sum">0</div>
      </div>
    </div>
    <div style="text-align:center;margin-top:8px">
      <button class="play-btn btn-sun" onclick="resetFingers()">ğŸ”„ Reset Fingers</button>
    </div>

    <div class="card-grid" style="margin-top:28px">
      <div class="math-card card-orange">
        <span class="card-icon">ğŸ–</span>
        <h3 class="card-title">Count to 10!</h3>
        <p class="card-desc">Use all 10 fingers to count from 1 to 10. Each finger is one number. Great for little learners!</p>
      </div>
      <div class="math-card card-sun">
        <span class="card-icon">âœŒï¸</span>
        <h3 class="card-title">Add with Fingers</h3>
        <p class="card-desc">Put up 3 fingers on one hand and 2 on the other. Count them all â€” that's 3 + 2 = 5!</p>
      </div>
      <div class="math-card card-coral">
        <span class="card-icon">ğŸ§ </span>
        <h3 class="card-title">9Ã— Finger Trick</h3>
        <p class="card-desc">For 9Ã—n, hold down the n-th finger. Left fingers = tens digit, right fingers = ones digit. Magic!</p>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION 4 â€” VISUAL COUNTING
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="math-section" id="sec-visual">
    <h2 class="section-title" style="color:var(--mint)">ğŸ‘€ Visual Counting</h2>
    <p class="section-sub">Count real objects! Press + to add more and âˆ’ to take away.</p>

    <div class="object-counter">
      <div class="object-selector" id="obj-selector">
        <span class="obj-option chosen" onclick="setObject('ğŸ',this)">ğŸ</span>
        <span class="obj-option" onclick="setObject('â­',this)">â­</span>
        <span class="obj-option" onclick="setObject('ğŸ',this)">ğŸ</span>
        <span class="obj-option" onclick="setObject('ğŸ¦‹',this)">ğŸ¦‹</span>
        <span class="obj-option" onclick="setObject('ğŸš€',this)">ğŸš€</span>
        <span class="obj-option" onclick="setObject('ğŸŒ¸',this)">ğŸŒ¸</span>
        <span class="obj-option" onclick="setObject('ğŸˆ',this)">ğŸˆ</span>
        <span class="obj-option" onclick="setObject('ğŸ ',this)">ğŸ </span>
        <span class="obj-option" onclick="setObject('ğŸŒ®',this)">ğŸŒ®</span>
        <span class="obj-option" onclick="setObject('ğŸ¦',this)">ğŸ¦</span>
      </div>
      <div class="object-display" id="obj-display">
        <span style="color:#ccc;font-weight:700">Press + to add objects!</span>
      </div>
      <div class="counter-controls">
        <button class="count-btn btn-minus" onclick="changeCount(-5)">âˆ’5</button>
        <button class="count-btn btn-minus" onclick="changeCount(-1)">âˆ’</button>
        <div class="count-display" id="count-display">0</div>
        <button class="count-btn btn-plus" onclick="changeCount(1)">+</button>
        <button class="count-btn btn-plus" onclick="changeCount(5)">+5</button>
      </div>
    </div>

    <div class="card-grid">
      <div class="math-card card-mint">
        <span class="card-icon">ğŸ</span>
        <h3 class="card-title">Count Everything!</h3>
        <p class="card-desc">Count objects in real life: apples, shoes, stairs, windows. The more you count, the better you get!</p>
      </div>
      <div class="math-card card-teal">
        <span class="card-icon">ğŸ”¢</span>
        <h3 class="card-title">Groups of 10</h3>
        <p class="card-desc">When you have 10 objects, group them together. Grouping in 10s makes big numbers much easier!</p>
      </div>
      <div class="math-card card-sky">
        <span class="card-icon">ğŸ²</span>
        <h3 class="card-title">Subitizing</h3>
        <p class="card-desc">Subitizing means knowing how many things there are without counting! You can instantly see 3 or 4 dots without counting each one.</p>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION 5 â€” ADDITION & SUBTRACTION
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="math-section" id="sec-operations">
    <h2 class="section-title" style="color:var(--coral)">â• Add &amp; Subtract</h2>
    <p class="section-sub">Type two numbers and see the colourful blocks do the maths for you!</p>

    <div class="op-stage">
      <div class="op-row">
        <input class="op-input" id="op-a" type="number" min="0" max="20" value="3" oninput="calcOp()">
        <select id="op-type" class="op-input" style="width:100px;font-size:1.4em" onchange="calcOp()">
          <option value="+">â•</option>
          <option value="-">â–</option>
        </select>
        <input class="op-input" id="op-b" type="number" min="0" max="20" value="4" oninput="calcOp()">
        <span class="op-equals">=</span>
        <div class="op-result" id="op-result">7</div>
      </div>

      <div class="op-visual" id="op-visual"></div>

      <div style="text-align:center">
        <button class="calc-btn" onclick="calcOp()">ğŸ” Show Me!</button>
        <button class="calc-btn" style="background:var(--mint);margin-left:10px" onclick="randomOp()">ğŸ² Random Problem</button>
      </div>
    </div>

    <div class="card-grid">
      <div class="math-card card-coral">
        <span class="card-icon">ğŸŒ‰</span>
        <h3 class="card-title">Bridge to 10</h3>
        <p class="card-desc">To add 8+5, think: 8 needs 2 more to make 10. Take 2 from 5 â†’ 10+3 = 13. Fast and easy!</p>
      </div>
      <div class="math-card card-sky">
        <span class="card-icon">ğŸ”„</span>
        <h3 class="card-title">Commutative Property</h3>
        <p class="card-desc">3+5 = 5+3. The order doesn't matter in addition! This means fewer facts to memorise.</p>
      </div>
      <div class="math-card card-mint">
        <span class="card-icon">ğŸ§Š</span>
        <h3 class="card-title">Counting On</h3>
        <p class="card-desc">Start with the bigger number and count on. For 6+3, start at 6 and count: 7, 8, 9. Done!</p>
      </div>
      <div class="math-card card-purple">
        <span class="card-icon">ğŸ </span>
        <h3 class="card-title">Part-Part-Whole</h3>
        <p class="card-desc">Every number is made of parts. 7 = 3+4 or 5+2 or 6+1. Draw a house shape to see the parts!</p>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION 6 â€” TIMES TABLES
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="math-section" id="sec-times">
    <h2 class="section-title" style="color:var(--purple)">âœ– Times Tables</h2>
    <p class="section-sub">Pick a number below and glow up the whole times table!</p>

    <div class="tt-controls" id="tt-controls">
      <button class="tt-num-btn active" onclick="selectTable(1,this)">1</button>
      <button class="tt-num-btn" onclick="selectTable(2,this)">2</button>
      <button class="tt-num-btn" onclick="selectTable(3,this)">3</button>
      <button class="tt-num-btn" onclick="selectTable(4,this)">4</button>
      <button class="tt-num-btn" onclick="selectTable(5,this)">5</button>
      <button class="tt-num-btn" onclick="selectTable(6,this)">6</button>
      <button class="tt-num-btn" onclick="selectTable(7,this)">7</button>
      <button class="tt-num-btn" onclick="selectTable(8,this)">8</button>
      <button class="tt-num-btn" onclick="selectTable(9,this)">9</button>
      <button class="tt-num-btn" onclick="selectTable(10,this)">10</button>
    </div>

    <div class="times-table-grid" id="tt-grid"></div>

    <div class="card-grid">
      <div class="math-card card-purple">
        <span class="card-icon">âœŒï¸</span>
        <h3 class="card-title">2Ã— Table Trick</h3>
        <p class="card-desc">The 2Ã— table is just doubling! 2Ã—6 = 6+6 = 12. If you know doubles, you know the 2 times table!</p>
      </div>
      <div class="math-card card-pink">
        <span class="card-icon">ğŸ–</span>
        <h3 class="card-title">5Ã— Table Trick</h3>
        <p class="card-desc">The 5Ã— table always ends in 0 or 5! Just count in fives: 5, 10, 15, 20, 25... Easy peasy!</p>
      </div>
      <div class="math-card card-sky">
        <span class="card-icon">ğŸ”Ÿ</span>
        <h3 class="card-title">10Ã— Table Trick</h3>
        <p class="card-desc">Multiply by 10? Just add a zero! 10Ã—7 = 70, 10Ã—9 = 90. The easiest table of all!</p>
      </div>
      <div class="math-card card-orange">
        <span class="card-icon">ğŸ”„</span>
        <h3 class="card-title">Skip Counting</h3>
        <p class="card-desc">Count in jumps to learn any table. For 3Ã—: 3, 6, 9, 12, 15 â€¦ Each jump adds one more 3!</p>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION 7 â€” SHAPES
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="math-section" id="sec-shapes">
    <h2 class="section-title" style="color:var(--pink)">ğŸ”· Shapes &amp; Geometry</h2>
    <p class="section-sub">Click any shape to learn its super-powers!</p>

    <div class="shapes-gallery" id="shapes-gallery"></div>

    <div id="shape-detail" style="display:none;background:white;border-radius:20px;padding:28px;border:3px solid var(--pink);margin-bottom:24px">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
        <h3 id="shape-det-name" style="font-family:'Baloo 2',sans-serif;font-size:1.8em;font-weight:800"></h3>
        <button class="close-btn" onclick="document.getElementById('shape-detail').style.display='none'">âœ– Close</button>
      </div>
      <div style="display:flex;gap:20px;flex-wrap:wrap;align-items:center">
        <svg id="shape-det-svg" width="160" height="160" viewBox="0 0 160 160"></svg>
        <div>
          <p id="shape-det-info" style="color:#444;line-height:1.8;font-size:1.05em;max-width:420px"></p>
        </div>
      </div>
    </div>

    <div class="card-grid">
      <div class="math-card card-pink">
        <span class="card-icon">ğŸ“</span>
        <h3 class="card-title">Perimeter</h3>
        <p class="card-desc">Perimeter = the total distance around a shape. Add all the sides together! A square with sides of 4 has perimeter 4+4+4+4 = 16.</p>
      </div>
      <div class="math-card card-purple">
        <span class="card-icon">ğŸ“</span>
        <h3 class="card-title">Area</h3>
        <p class="card-desc">Area = how much space is inside a shape. For a rectangle, multiply length Ã— width. Like counting floor tiles!</p>
      </div>
      <div class="math-card card-teal">
        <span class="card-icon">ğŸ”®</span>
        <h3 class="card-title">3D Shapes</h3>
        <p class="card-desc">3D shapes have length, width AND height! A cube has 6 faces, 12 edges and 8 corners (called vertices).</p>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION 8 â€” FRACTIONS
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="math-section" id="sec-fractions">
    <h2 class="section-title" style="color:var(--teal)">ğŸ• Fractions</h2>
    <p class="section-sub">Learn fractions by slicing a pizza â€” the tastiest maths ever!</p>

    <div class="pizza-area">
      <div class="pizza-container">
        <canvas id="pizza-canvas" class="pizza-canvas" width="200" height="200"></canvas>
        <div class="fraction-label" id="fraction-label">1 whole</div>
        <div class="slice-desc" id="slice-desc">The whole pizza â€” no slices</div>
      </div>
      <div style="display:flex;flex-direction:column;justify-content:center;gap:14px;max-width:380px">
        <h3 style="font-family:'Baloo 2',sans-serif;font-weight:800;color:var(--teal)">Cut the pizza into slices!</h3>
        <div class="fraction-btns">
          <button class="frac-btn" onclick="setFraction(1)">Whole</button>
          <button class="frac-btn" onclick="setFraction(2)">Halves Â½</button>
          <button class="frac-btn" onclick="setFraction(3)">Thirds â…“</button>
          <button class="frac-btn" onclick="setFraction(4)">Quarters Â¼</button>
          <button class="frac-btn" onclick="setFraction(6)">Sixths â…™</button>
          <button class="frac-btn" onclick="setFraction(8)">Eighths â…›</button>
        </div>
        <div id="fraction-info" style="background:#F0FFFD;border-radius:14px;padding:16px;border:2px solid var(--teal);font-weight:700;color:#333;line-height:1.8">
          A whole means 1 out of 1 piece. All the pizza is yours! ğŸ‰
        </div>
      </div>
    </div>

    <div class="card-grid">
      <div class="math-card card-teal">
        <span class="card-icon">Â½</span>
        <h3 class="card-title">What is Â½?</h3>
        <p class="card-desc">Â½ means 1 piece out of 2 equal pieces. Fold a paper in half â€” each part is Â½ of the whole!</p>
      </div>
      <div class="math-card card-mint">
        <span class="card-icon">Â¼</span>
        <h3 class="card-title">What is Â¼?</h3>
        <p class="card-desc">Â¼ means 1 piece out of 4 equal pieces. A quarter! Four quarters make one whole dollar too!</p>
      </div>
      <div class="math-card card-sky">
        <span class="card-icon">ğŸ°</span>
        <h3 class="card-title">Equal Parts</h3>
        <p class="card-desc">The pieces must be the SAME SIZE for it to be a proper fraction. Fair sharing is the key to fractions!</p>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION 9 â€” MEASUREMENT
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="math-section" id="sec-measurement">
    <h2 class="section-title" style="color:var(--orange)">ğŸ“ Measurement</h2>
    <p class="section-sub">How long, how heavy, how much? Click the ruler to measure!</p>

    <div class="ruler-wrap">
      <h3 style="font-weight:800;color:var(--orange);margin-bottom:16px;text-align:center">ğŸ“ Click a number on the ruler!</h3>
      <div class="ruler" id="ruler"></div>
      <div class="measure-object" id="measure-visual">
        <span class="measure-item" id="measure-emoji">ğŸ›</span>
        <div class="measure-arrow" id="measure-bar" style="width:0px"></div>
      </div>
      <p id="measure-text" style="text-align:center;font-weight:800;font-size:1.2em;color:var(--orange);min-height:30px"></p>
    </div>

    <div class="card-grid">
      <div class="math-card card-orange">
        <span class="card-icon">ğŸ“</span>
        <h3 class="card-title">Length</h3>
        <p class="card-desc">We measure length with rulers and tape measures. We use centimetres (cm) and metres (m) to describe how long something is!</p>
      </div>
      <div class="math-card card-sun">
        <span class="card-icon">âš–ï¸</span>
        <h3 class="card-title">Weight</h3>
        <p class="card-desc">We weigh things using scales. Grams (g) and kilograms (kg) tell us how heavy things are. 1 kg = 1,000 g!</p>
      </div>
      <div class="math-card card-sky">
        <span class="card-icon">ğŸ¥¤</span>
        <h3 class="card-title">Capacity</h3>
        <p class="card-desc">Capacity means how much liquid a container holds. We use millilitres (ml) and litres (l). 1 litre = 1,000 ml!</p>
      </div>
      <div class="math-card card-mint">
        <span class="card-icon">ğŸ•°ï¸</span>
        <h3 class="card-title">Time</h3>
        <p class="card-desc">We measure time in seconds, minutes, hours, days, weeks, months and years! 60 seconds = 1 minute, 60 minutes = 1 hour.</p>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION 10 â€” QUIZ
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="math-section" id="sec-quiz">
    <h2 class="section-title" style="color:var(--purple)">ğŸ¯ Math Quiz</h2>
    <p class="section-sub">Test everything you've learned! Earn stars for right answers!</p>

    <div class="quiz-card">
      <div class="quiz-question" id="quiz-q">Loadingâ€¦</div>
      <div class="quiz-options" id="quiz-opts"></div>
      <div class="quiz-feedback" id="quiz-fb"></div>
      <button class="next-btn" id="quiz-next" onclick="nextQuestion()">Next Question â¡</button>
      <div class="star-row" id="star-row">
        <span class="star">â­</span><span class="star">â­</span><span class="star">â­</span>
        <span class="star">â­</span><span class="star">â­</span>
      </div>
      <div class="quiz-score" id="quiz-score">Score: 0</div>
    </div>
  </div>

</div><!-- /.page-wrapper -->

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     JAVASCRIPT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
/* â”€â”€â”€ TOPIC SWITCHING â”€â”€â”€ */
function showSection(id, pill) {
  document.querySelectorAll('.math-section').forEach(s => s.classList.remove('visible'));
  document.getElementById('sec-' + id).classList.add('visible');
  document.querySelectorAll('.topic-pill').forEach(p => p.classList.remove('active'));
  pill.classList.add('active');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ABACUS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const ABACUS_CONFIG = [
  { label: 'Hundreds (100)', color: '#FF6B6B', value: 100, beads: 9 },
  { label: 'Tens (10)',      color: '#FF9A3C', value: 10,  beads: 9 },
  { label: 'Ones (1)',       color: '#6BCB77', value: 1,   beads: 9 },
];
const beadStates = ABACUS_CONFIG.map(r => Array(r.beads).fill(false));

function buildAbacus() {
  const container = document.getElementById('abacus-rows');
  ABACUS_CONFIG.forEach((row, ri) => {
    const rowEl = document.createElement('div');
    rowEl.className = 'abacus-row';
    rowEl.innerHTML = `<div class="row-label">${row.label}</div><div class="rod-container"><div class="rod"></div><div class="beads-container" id="bc-${ri}"></div></div>`;
    container.appendChild(rowEl);
    const bc = document.getElementById('bc-' + ri);
    for (let b = 0; b < row.beads; b++) {
      const bead = document.createElement('div');
      bead.className = 'bead off';
      bead.style.background = `radial-gradient(circle at 35% 35%, ${row.color}, ${row.color}99)`;
      bead.style.setProperty('--bc', row.color);
      bead.dataset.row = ri; bead.dataset.bead = b;
      bead.onclick = () => toggleBead(ri, b, bead, row.color);
      bc.appendChild(bead);
    }
  });
}

function toggleBead(ri, bi, el, color) {
  beadStates[ri][bi] = !beadStates[ri][bi];
  el.className = 'bead ' + (beadStates[ri][bi] ? 'on' : 'off');
  if (beadStates[ri][bi]) el.style.background = `radial-gradient(circle at 35% 35%, ${color}EE, ${color}88)`;
  else el.style.background = `radial-gradient(circle at 35% 35%, ${color}77, ${color}33)`;
  updateAbacusTotal();
}

function updateAbacusTotal() {
  let total = 0;
  const parts = [];
  ABACUS_CONFIG.forEach((row, ri) => {
    const n = beadStates[ri].filter(Boolean).length;
    total += n * row.value;
    if (n > 0) parts.push(`${n}Ã—${row.value}`);
  });
  document.getElementById('abacus-total').textContent = 'Total: ' + total;
  document.getElementById('abacus-equation').textContent = parts.length ? parts.join(' + ') + ' = ' + total : '= 0';
}

function abacusReset() {
  beadStates.forEach((row, ri) => {
    row.fill(false);
    document.querySelectorAll(`#bc-${ri} .bead`).forEach((b, bi) => {
      const color = ABACUS_CONFIG[ri].color;
      b.className = 'bead off';
      b.style.background = `radial-gradient(circle at 35% 35%, ${color}77, ${color}33)`;
    });
  });
  updateAbacusTotal();
}

function abacusSetNumber(n) {
  abacusReset();
  let rem = n;
  ABACUS_CONFIG.forEach((row, ri) => {
    const count = Math.min(Math.floor(rem / row.value), row.beads);
    rem %= row.value;
    const bc = document.getElementById('bc-' + ri);
    bc.querySelectorAll('.bead').forEach((b, bi) => {
      if (bi < count) {
        beadStates[ri][bi] = true;
        b.className = 'bead on';
        b.style.background = `radial-gradient(circle at 35% 35%, ${row.color}EE, ${row.color}88)`;
      }
    });
  });
  updateAbacusTotal();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• NUMBER LINE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let frogPos = 0;
const NL_MAX = 20;

function buildNumberLine() {
  const track = document.getElementById('nl-track');
  for (let i = 0; i <= NL_MAX; i++) {
    const m = document.createElement('div');
    m.className = 'nl-marker';
    m.style.left = (i / NL_MAX * 100) + '%';
    m.innerHTML = `<div class="nl-tick big-tick"></div><div class="nl-num">${i}</div>`;
    track.appendChild(m);
  }
  const frog = document.createElement('div');
  frog.className = 'nl-frog'; frog.id = 'nl-frog'; frog.textContent = 'ğŸ¸';
  track.appendChild(frog);
  updateFrogPos();
}

function frogJump(n) {
  frogPos = Math.max(0, Math.min(NL_MAX, frogPos + n));
  updateFrogPos();
}
function frogReset() { frogPos = 0; updateFrogPos(); }
function updateFrogPos() {
  const pct = (frogPos / NL_MAX * 100) + '%';
  const frog = document.getElementById('nl-frog');
  if (frog) { frog.style.left = pct; }
  document.getElementById('frog-pos').textContent = frogPos;
}
function checkNLAnswer(ans) {
  const fb = document.getElementById('nl-feedback');
  if (ans === 5) { fb.textContent = 'ğŸ‰ Correct! 0 + 3 + 2 = 5!'; fb.style.color = 'var(--mint)'; }
  else { fb.textContent = 'âŒ Try again! Hop +3, then +2 from 0.'; fb.style.color = 'var(--coral)'; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FINGER COUNTING â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let fingerCounts = { left: 0, right: 0 };

function toggleFinger(el, hand, idx) {
  el.classList.toggle('raised');
  fingerCounts[hand] = document.querySelectorAll(`#${hand}-fingers .finger.raised`).length;
  document.getElementById(hand + '-sum').textContent = fingerCounts[hand];
  document.getElementById('total-fingers').textContent = fingerCounts.left + fingerCounts.right;
}

function resetFingers() {
  document.querySelectorAll('.finger').forEach(f => f.classList.remove('raised'));
  fingerCounts = { left: 0, right: 0 };
  document.getElementById('left-sum').textContent = '0';
  document.getElementById('right-sum').textContent = '0';
  document.getElementById('total-fingers').textContent = '0';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• VISUAL COUNTING â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let currentObj = 'ğŸ', objCount = 0;

function setObject(emoji, el) {
  currentObj = emoji;
  document.querySelectorAll('.obj-option').forEach(o => o.classList.remove('chosen'));
  el.classList.add('chosen');
  objCount = 0;
  renderObjects();
}

function changeCount(delta) {
  objCount = Math.max(0, Math.min(50, objCount + delta));
  renderObjects();
}

function renderObjects() {
  const d = document.getElementById('obj-display');
  document.getElementById('count-display').textContent = objCount;
  d.innerHTML = objCount === 0
    ? '<span style="color:#ccc;font-weight:700">Press + to add objects!</span>'
    : Array(objCount).fill(`<span class="count-obj">${currentObj}</span>`).join('');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• OPERATIONS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const BLOCK_COLORS = ['#FF6B6B','#4D96FF','#6BCB77','#FFD93D','#C77DFF','#FF9A3C','#00C9B1','#FF6FD8'];

function calcOp() {
  const a = parseInt(document.getElementById('op-a').value) || 0;
  const b = parseInt(document.getElementById('op-b').value) || 0;
  const op = document.getElementById('op-type').value;
  const result = op === '+' ? a + b : a - b;
  document.getElementById('op-result').textContent = isNaN(result) ? '?' : result;
  const vis = document.getElementById('op-visual');

  const makeBlocks = (n, color, cls) => {
    const g = document.createElement('div');
    g.className = 'op-group';
    for (let i = 0; i < Math.abs(n); i++) {
      const b = document.createElement('div');
      b.className = 'op-block ' + cls;
      b.style.background = color;
      b.style.animationDelay = (i * 0.04) + 's';
      g.appendChild(b);
    }
    return g;
  };

  vis.innerHTML = '';
  if (op === '+') {
    vis.appendChild(makeBlocks(a, BLOCK_COLORS[0], 'block-a'));
    const div = document.createElement('div');
    div.className = 'op-divider'; div.textContent = '+';
    vis.appendChild(div);
    vis.appendChild(makeBlocks(b, BLOCK_COLORS[1], 'block-b'));
    const eq = document.createElement('div');
    eq.className = 'op-divider'; eq.textContent = '=';
    vis.appendChild(eq);
    const all = document.createElement('div');
    all.className = 'op-group';
    for (let i = 0; i < result; i++) {
      const bl = document.createElement('div');
      bl.className = 'op-block';
      bl.style.background = i < a ? BLOCK_COLORS[0] : BLOCK_COLORS[1];
      bl.style.animationDelay = (i * 0.04) + 's';
      all.appendChild(bl);
    }
    vis.appendChild(all);
  } else {
    vis.appendChild(makeBlocks(a, BLOCK_COLORS[2], 'block-a'));
    const div = document.createElement('div');
    div.className = 'op-divider'; div.textContent = 'âˆ’';
    vis.appendChild(div);
    vis.appendChild(makeBlocks(Math.min(b, a), BLOCK_COLORS[7], 'block-b'));
  }
}

function randomOp() {
  document.getElementById('op-a').value = Math.floor(Math.random() * 10) + 1;
  document.getElementById('op-b').value = Math.floor(Math.random() * 10) + 1;
  document.getElementById('op-type').value = Math.random() > 0.5 ? '+' : '-';
  calcOp();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TIMES TABLES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const TT_COLORS = ['','#FF6B6B','#FF9A3C','#FFD93D','#6BCB77','#4D96FF','#C77DFF','#FF6FD8','#00C9B1','#FF9A3C','#4D96FF'];
let currentTable = 1;

function buildTimesTable() {
  const grid = document.getElementById('tt-grid');
  grid.innerHTML = '';
  for (let i = 1; i <= 10; i++) {
    const product = currentTable * i;
    const cell = document.createElement('div');
    cell.className = 'tt-cell highlight';
    cell.style.background = TT_COLORS[currentTable];
    cell.innerHTML = `${currentTable}Ã—${i}<br><span>= ${product}</span>`;
    grid.appendChild(cell);
  }
}

function selectTable(n, btn) {
  currentTable = n;
  document.querySelectorAll('.tt-num-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  buildTimesTable();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SHAPES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const SHAPES_DATA = [
  { name: 'Circle', sides: 0, fact: 'No corners, no sides, perfectly round! Pi (Ï€â‰ˆ3.14) connects its width to its circumference.',
    color: '#4D96FF', draw: ctx => { ctx.beginPath(); ctx.arc(80,80,60,0,Math.PI*2); ctx.fillStyle='#4D96FF33'; ctx.fill(); ctx.strokeStyle='#4D96FF'; ctx.lineWidth=4; ctx.stroke(); } },
  { name: 'Triangle', sides: 3, fact: '3 sides & 3 angles. All interior angles add up to 180Â°!',
    color: '#FF6B6B', draw: ctx => { ctx.beginPath(); ctx.moveTo(80,20); ctx.lineTo(140,140); ctx.lineTo(20,140); ctx.closePath(); ctx.fillStyle='#FF6B6B33'; ctx.fill(); ctx.strokeStyle='#FF6B6B'; ctx.lineWidth=4; ctx.stroke(); } },
  { name: 'Square', sides: 4, fact: '4 equal sides & 4 right angles (90Â°). Area = side Ã— side.',
    color: '#6BCB77', draw: ctx => { ctx.beginPath(); ctx.rect(20,20,120,120); ctx.fillStyle='#6BCB7733'; ctx.fill(); ctx.strokeStyle='#6BCB77'; ctx.lineWidth=4; ctx.stroke(); } },
  { name: 'Rectangle', sides: 4, fact: 'Opposite sides equal. Area = length Ã— width. A square is a special rectangle!',
    color: '#FF9A3C', draw: ctx => { ctx.beginPath(); ctx.rect(10,40,140,80); ctx.fillStyle='#FF9A3C33'; ctx.fill(); ctx.strokeStyle='#FF9A3C'; ctx.lineWidth=4; ctx.stroke(); } },
  { name: 'Pentagon', sides: 5, fact: '5 sides & 5 angles. A stop sign is almost an octagon. The US Pentagon has 5 sides!',
    color: '#C77DFF', draw: ctx => { ctx.beginPath(); for(let i=0;i<5;i++){ const a=Math.PI*2*i/5-Math.PI/2; ctx.lineTo(80+68*Math.cos(a),80+68*Math.sin(a)); } ctx.closePath(); ctx.fillStyle='#C77DFF33'; ctx.fill(); ctx.strokeStyle='#C77DFF'; ctx.lineWidth=4; ctx.stroke(); } },
  { name: 'Hexagon', sides: 6, fact: '6 sides & 6 angles. Honeybees build honeycombs in perfect hexagons â€” nature\'s smartest shape!',
    color: '#FFD93D', draw: ctx => { ctx.beginPath(); for(let i=0;i<6;i++){ const a=Math.PI*2*i/6; ctx.lineTo(80+68*Math.cos(a),80+68*Math.sin(a)); } ctx.closePath(); ctx.fillStyle='#FFD93D33'; ctx.fill(); ctx.strokeStyle='#FFD93D'; ctx.lineWidth=4; ctx.stroke(); } },
  { name: 'Oval', sides: 0, fact: 'Like a stretched circle! Also called an ellipse. Planets orbit the sun in oval paths.',
    color: '#00C9B1', draw: ctx => { ctx.beginPath(); ctx.ellipse(80,80,70,45,0,0,Math.PI*2); ctx.fillStyle='#00C9B133'; ctx.fill(); ctx.strokeStyle='#00C9B1'; ctx.lineWidth=4; ctx.stroke(); } },
  { name: 'Diamond', sides: 4, fact: 'A square rotated 45Â°! Also called a rhombus â€” all 4 sides equal, but angles aren\'t 90Â°.',
    color: '#FF6FD8', draw: ctx => { ctx.beginPath(); ctx.moveTo(80,10); ctx.lineTo(150,80); ctx.lineTo(80,150); ctx.lineTo(10,80); ctx.closePath(); ctx.fillStyle='#FF6FD833'; ctx.fill(); ctx.strokeStyle='#FF6FD8'; ctx.lineWidth=4; ctx.stroke(); } },
];

function buildShapes() {
  const gallery = document.getElementById('shapes-gallery');
  SHAPES_DATA.forEach(sh => {
    const card = document.createElement('div');
    card.className = 'shape-card';
    card.onclick = () => showShapeDetail(sh);
    const cvs = document.createElement('canvas');
    cvs.width = 160; cvs.height = 160; cvs.style.cssText = 'width:80px;height:80px;margin:0 auto 8px;display:block;';
    const ctx = cvs.getContext('2d');
    sh.draw(ctx);
    card.appendChild(cvs);
    card.innerHTML += `<div class="shape-name">${sh.name}</div><div class="shape-fact">${sh.sides > 0 ? sh.sides + ' sides' : 'No corners'}</div>`;
    gallery.appendChild(card);
  });
}

function showShapeDetail(sh) {
  document.getElementById('shape-det-name').textContent = sh.name;
  document.getElementById('shape-det-info').textContent = sh.fact;
  const svg = document.getElementById('shape-det-svg');
  svg.innerHTML = '';
  const cvs = document.createElement('canvas');
  cvs.width = 160; cvs.height = 160;
  sh.draw(cvs.getContext('2d'));
  svg.parentNode.replaceChild(cvs, svg); cvs.id = 'shape-det-svg';
  cvs.style.cssText = 'width:160px;height:160px;border-radius:14px;';
  document.getElementById('shape-detail').style.display = 'block';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FRACTIONS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let currentSlices = 1;
const PIZZA_COLORS = ['#FF6B6B','#FF9A3C','#FFD93D','#6BCB77','#4D96FF','#C77DFF','#FF6FD8','#00C9B1'];
const FRACTION_NAMES = {1:'1 whole',2:'Â½ â€” one half',3:'â…“ â€” one third',4:'Â¼ â€” one quarter',6:'â…™ â€” one sixth',8:'â…› â€” one eighth'};
const FRACTION_INFO = {
  1: 'A whole means 1 out of 1 piece. All the pizza is yours! ğŸ‰',
  2: 'Half means 1 out of 2 equal pieces. Each person gets the same amount!',
  3: 'A third means 1 out of 3 equal pieces. Three friends share fairly!',
  4: 'A quarter means 1 out of 4 equal pieces. Like slices in a sandwich!',
  6: 'A sixth means 1 out of 6 equal pieces. Great for a group of 6!',
  8: 'An eighth means 1 out of 8 equal pieces. Pizza party for 8 people!',
};

function setFraction(n) {
  currentSlices = n;
  drawPizza(n);
  document.getElementById('fraction-label').textContent = FRACTION_NAMES[n];
  document.getElementById('slice-desc').textContent = n > 1 ? `${n} equal slices â€” each slice is 1/${n}` : 'No slices yet!';
  document.getElementById('fraction-info').textContent = FRACTION_INFO[n];
  document.querySelectorAll('.frac-btn').forEach(b => b.classList.remove('active'));
  event.target.classList.add('active');
}

function drawPizza(n) {
  const cvs = document.getElementById('pizza-canvas');
  const ctx = cvs.getContext('2d');
  const cx = cvs.width/2, cy = cvs.height/2, r = 90;
  ctx.clearRect(0,0,cvs.width,cvs.height);

  for (let i = 0; i < n; i++) {
    const startAngle = (i/n)*Math.PI*2 - Math.PI/2;
    const endAngle   = ((i+1)/n)*Math.PI*2 - Math.PI/2;
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.arc(cx, cy, r, startAngle, endAngle);
    ctx.closePath();
    ctx.fillStyle = PIZZA_COLORS[i % PIZZA_COLORS.length] + 'CC';
    ctx.fill();
    ctx.strokeStyle = 'white';
    ctx.lineWidth = 3;
    ctx.stroke();
  }
  // Crust
  ctx.beginPath();
  ctx.arc(cx, cy, r, 0, Math.PI*2);
  ctx.strokeStyle = '#8B4513';
  ctx.lineWidth = 8;
  ctx.stroke();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MEASUREMENT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const MEASURE_OBJECTS = [
  { emoji:'ğŸ›', cm:3, name:'caterpillar' },
  { emoji:'ğŸ–Šï¸', cm:8, name:'pen' },
  { emoji:'ğŸ“', cm:15, name:'ruler' },
  { emoji:'ğŸ§¸', cm:20, name:'teddy bear' },
  { emoji:'ğŸš—', cm:12, name:'toy car' },
];
let measureIdx = 0;

function buildRuler() {
  const ruler = document.getElementById('ruler');
  for (let i = 0; i <= 20; i++) {
    const unit = document.createElement('div');
    unit.className = 'ruler-unit';
    unit.onclick = () => measureClick(i);
    unit.innerHTML = `<div class="ruler-tick big-tick"></div><div class="ruler-num">${i}</div>`;
    ruler.appendChild(unit);
  }
  showMeasureObject();
}

function showMeasureObject() {
  const obj = MEASURE_OBJECTS[measureIdx % MEASURE_OBJECTS.length];
  document.getElementById('measure-emoji').textContent = obj.emoji;
  document.getElementById('measure-bar').style.width = '0px';
  document.getElementById('measure-text').textContent = `How long is the ${obj.name}? Click the number on the ruler!`;
  measureIdx++;
}

function measureClick(n) {
  const obj = MEASURE_OBJECTS[(measureIdx - 1) % MEASURE_OBJECTS.length];
  const bar = document.getElementById('measure-bar');
  bar.style.width = (n * 20) + 'px';
  const fb = document.getElementById('measure-text');
  if (n === obj.cm) {
    fb.textContent = `ğŸ‰ Correct! The ${obj.name} is ${obj.cm} cm long!`;
    fb.style.color = 'var(--mint)';
    setTimeout(() => { showMeasureObject(); fb.style.color = 'var(--orange)'; }, 2000);
  } else {
    fb.textContent = `Try again! You clicked ${n} cm. Hint: count carefully!`;
    fb.style.color = 'var(--coral)';
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• QUIZ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const QUIZ_BANK = [
  { q:'What is 3 + 4?',    a:7,  opts:[5,6,7,8] },
  { q:'What is 10 âˆ’ 3?',   a:7,  opts:[6,7,8,9] },
  { q:'What is 5 Ã— 2?',    a:10, opts:[8,9,10,12] },
  { q:'How many sides does a hexagon have?', a:6, opts:[5,6,7,8] },
  { q:'What is Â½ of 10?',  a:5,  opts:[4,5,6,7] },
  { q:'What is 12 + 8?',   a:20, opts:[18,19,20,21] },
  { q:'What is 15 âˆ’ 7?',   a:8,  opts:[7,8,9,10] },
  { q:'What is 4 Ã— 5?',    a:20, opts:[16,18,20,24] },
  { q:'How many cm in 1 metre?', a:100, opts:[10,50,100,1000] },
  { q:'What is Â¼ of 20?',  a:5,  opts:[4,5,8,10] },
  { q:'What is 9 Ã— 9?',    a:81, opts:[72,81,91,99] },
  { q:'A triangle has how many corners?', a:3, opts:[2,3,4,5] },
  { q:'What is 100 âˆ’ 37?', a:63, opts:[53,63,73,83] },
  { q:'What is 6 Ã— 7?',    a:42, opts:[36,40,42,48] },
  { q:'Which is Â½ of 16?', a:8,  opts:[4,6,8,10] },
];

let qIdx = 0, score = 0, starsLit = 0, answered = false;

function loadQuestion() {
  answered = false;
  const q = QUIZ_BANK[qIdx % QUIZ_BANK.length];
  document.getElementById('quiz-q').textContent = q.q;
  document.getElementById('quiz-fb').textContent = '';
  document.getElementById('quiz-next').classList.remove('show');
  const opts = document.getElementById('quiz-opts');
  opts.innerHTML = '';
  const shuffled = [...q.opts].sort(() => Math.random() - 0.5);
  shuffled.forEach(opt => {
    const btn = document.createElement('button');
    btn.className = 'quiz-opt';
    btn.textContent = opt;
    btn.onclick = () => checkAnswer(opt, q.a, btn);
    opts.appendChild(btn);
  });
}

function checkAnswer(chosen, correct, btn) {
  if (answered) return;
  answered = true;
  const fb = document.getElementById('quiz-fb');
  if (chosen === correct) {
    btn.classList.add('correct');
    fb.textContent = 'ğŸ‰ Amazing! Correct!';
    fb.style.color = 'var(--mint)';
    score++;
    document.getElementById('quiz-score').textContent = 'Score: ' + score;
    if (starsLit < 5) {
      const stars = document.querySelectorAll('.star');
      stars[starsLit].classList.add('lit');
      starsLit++;
    }
  } else {
    btn.classList.add('wrong');
    document.querySelectorAll('.quiz-opt').forEach(b => { if(+b.textContent === correct) b.classList.add('correct'); });
    fb.textContent = 'âŒ Not quite! The answer is ' + correct;
    fb.style.color = 'var(--coral)';
  }
  document.getElementById('quiz-next').classList.add('show');
}

function nextQuestion() {
  qIdx++;
  loadQuestion();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INIT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
buildAbacus();
buildNumberLine();
buildTimesTable();
buildShapes();
buildRuler();
drawPizza(1);
calcOp();
loadQuestion();
</script>
</body>
</html>
